assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
}
for (outcome in outcome_measures){
print(outcome)
}
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
count <- count + 1
}
outcome_names[count]
count
outcome_names[1]
t <- tag1
t <- "tag1"
paste0(outcome_names[count], "stats"data_", t, ".csv")
paste0(outcome_names[count], "stats"data_", t, ".csv")
paste0(outcome_names[count], "stats_data_", t, ".csv")
ya_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/ya_merged_results.csv')
ya_target_data$Age <- "YA"
ya_target_data$Block_num <- as.factor(ya_target_data$Block_num)
oa_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/oa_merged_results.csv')
oa_target_data$Age <- "OA"
oa_target_data$Block_num <- as.factor(oa_target_data$Block_num)
all_target_data <- rbind(ya_target_data, oa_target_data)
# Initializing variables
outcome_measures <- c('Total_Time', 'Orientation_Time', 'Navigation_Time', 'Distance', 'Speed', 'Mean_Dwell', 'Teleportations')
outcome_names <- c('ct', 'orict','navct','dt','speed', 'dwell', 'teleport')
count <- 1
tags <- c("tag1","tag2", "tag3", "tag4", "tag5", "tag6")
# Specify the directory where you want to save the CSV file
output_directory <- "/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/stat_tests/"
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
for (t in tags) {
dataframes <- ls()
# Filter dataframes that end with "tag1"
dataframes_to_save <- dataframes[grep(t, dataframes)]
# Create an empty list to store dataframes
combined_dataframes <- list()
# Loop through the selected dataframes, combine them, and add a "Source" column
for (df_name in dataframes_to_save) {
# Get the dataframe by name
df <- get(df_name)
# Add a "Source" column with the dataframe name
df$Source <- df_name
# Append the modified dataframe to the list
combined_dataframes[[df_name]] <- df
# Combine all dataframes into one giant dataframe
final_combined_dataframes <- do.call(rbind, combined_dataframes)
# Define the CSV file name
csv_file <- paste0(output_directory, paste0("stats_data_",
outcome_names[count],
"_", t, ".csv"))
# Save the combined dataframe as a CSV file
write.csv(final_combined_dataframes, file = csv_file, row.names = TRUE)
# Print a message to confirm the save
cat("Saved combined data as", csv_file, "\n")
}
count <- count + 1
}
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
for (t in tags) {
dataframes <- ls()
# Filter dataframes that end with "tag1"
dataframes_to_save <- dataframes[grep(t, dataframes)]
# Create an empty list to store dataframes
combined_dataframes <- list()
# Loop through the selected dataframes, combine them, and add a "Source" column
for (df_name in dataframes_to_save) {
# Get the dataframe by name
df <- get(df_name)
# Add a "Source" column with the dataframe name
df$Source <- df_name
# Append the modified dataframe to the list
combined_dataframes[[df_name]] <- df
# Combine all dataframes into one giant dataframe
final_combined_dataframes <- do.call(rbind, combined_dataframes)
# Define the CSV file name
csv_file <- paste0(output_directory, paste0("stats_data_",
outcome_names[count],
"_", t, ".csv"))
# Save the combined dataframe as a CSV file
write.csv(final_combined_dataframes, file = csv_file, row.names = TRUE)
# Print a message to confirm the save
cat("Saved combined data as", csv_file, "\n")
}
count <- count + 1
}
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
for (t in tags) {
dataframes <- ls()
# Filter dataframes that end with "tag1"
dataframes_to_save <- dataframes[grep(t, dataframes)]
# Create an empty list to store dataframes
combined_dataframes <- list()
# Loop through the selected dataframes, combine them, and add a "Source" column
for (df_name in dataframes_to_save) {
# Get the dataframe by name
df <- get(df_name)
# Add a "Source" column with the dataframe name
df$Source <- df_name
# Append the modified dataframe to the list
combined_dataframes[[df_name]] <- df
# Combine all dataframes into one giant dataframe
final_combined_dataframes <- do.call(rbind, combined_dataframes)
# Define the CSV file name
csv_file <- paste0(output_directory, paste0("stats_data_",
outcome_names[count],
"_", t, ".csv"))
# Save the combined dataframe as a CSV file
write.csv(final_combined_dataframes, file = csv_file, row.names = TRUE)
# Print a message to confirm the save
cat("Saved combined data as", csv_file, "\n")
}
}
count <- count + 1
}
ya_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/ya_merged_results.csv')
ya_target_data$Age <- "YA"
ya_target_data$Block_num <- as.factor(ya_target_data$Block_num)
oa_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/oa_merged_results.csv')
oa_target_data$Age <- "OA"
oa_target_data$Block_num <- as.factor(oa_target_data$Block_num)
all_target_data <- rbind(ya_target_data, oa_target_data)
# Initializing variables
outcome_measures <- c('Total_Time', 'Orientation_Time', 'Navigation_Time', 'Distance', 'Speed', 'Mean_Dwell', 'Teleportations')
outcome_names <- c('ct', 'orict','navct','dt','speed', 'dwell', 'teleport')
count <- 1
tags <- c("tag1","tag2", "tag3", "tag4", "tag5", "tag6")
# Specify the directory where you want to save the CSV file
output_directory <- "/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/stat_tests/"
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
for (t in tags) {
dataframes <- ls()
# Filter dataframes that end with "tag1"
dataframes_to_save <- dataframes[grep(t, dataframes)]
# Create an empty list to store dataframes
combined_dataframes <- list()
# Loop through the selected dataframes, combine them, and add a "Source" column
for (df_name in dataframes_to_save) {
# Get the dataframe by name
df <- get(df_name)
# Add a "Source" column with the dataframe name
df$Source <- df_name
# Append the modified dataframe to the list
combined_dataframes[[df_name]] <- df
}
# Combine all dataframes into one giant dataframe
final_combined_dataframes <- do.call(rbind, combined_dataframes)
# Define the CSV file name
csv_file <- paste0(output_directory, paste0("stats_data_",
outcome_names[count],
"_", t, ".csv"))
# Save the combined dataframe as a CSV file
write.csv(final_combined_dataframes, file = csv_file, row.names = TRUE)
# Print a message to confirm the save
cat("Saved combined data as", csv_file, "\n")
}
count <- count + 1
}
ya_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/ya_merged_results.csv')
ya_target_data$Age <- "YA"
ya_target_data$Block_num <- as.factor(ya_target_data$Block_num)
oa_target_data <- read.csv('/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/data/oa_merged_results.csv')
oa_target_data$Age <- "OA"
oa_target_data$Block_num <- as.factor(oa_target_data$Block_num)
all_target_data <- rbind(ya_target_data, oa_target_data)
# Initializing variables
outcome_measures <- c('Total_Time', 'Orientation_Time', 'Navigation_Time', 'Distance', 'Speed', 'Mean_Dwell', 'Teleportations')
outcome_names <- c('ct', 'orict','navct','dt','speed', 'dwell', 'teleport')
count <- 1
# Specify the directory where you want to save the CSV file
output_directory <- "/Users/yasminebassil/Documents/Emory/3_Research/Projects/NavAging_Paper/stat_tests/"
# Looping through outcome measures
for (outcome in outcome_measures) {
# Running the linear mixed model (LMM)
lmm_formula <- as.formula(paste(outcome, "~ Block_num*Target_Name*Age + (1|Participant)"))
lmm_outcome <- lmer(lmm_formula, data = all_target_data)
assign(paste0("m_",outcome_names[count]), lmm_outcome)
# Running the anova on the LMM
anova_formula <- paste0("m_",outcome_names[count])
anova <- anova(get(paste0("m_",outcome_names[count])))
assign(paste0("m_",outcome_names[count], "_anova_tag1"), anova)
# Figure 3
## Running emmeans on LMM for Age x Block
emm_b <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num)
assign(paste0("emm_m_",outcome_names[count], "_b"), emm_b)
## Running contrasts on emmeans to get group differences
emm_b_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), method = "pairwise")
emm_b_groups <- as.data.frame(emm_b_groups)
assign(paste0("m_", outcome_names[count], "_b_groups_tag2"), emm_b_groups)
## Running contrasts on emmeans to get slope differences
emm_b_slopes <- contrast(get(paste0("emm_m_",outcome_names[count], "_b")), interaction = "pairwise")
emm_b_slopes <- data.frame(emm_b_slopes)
assign(paste0("m_", outcome_names[count], "_b_slopes_tag3"), emm_b_slopes)
# Figure 4
## Running emmeans on LMM for Age * Target
emm_t <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_t"), emm_t)
## Running contrasts on emmeans to get group differences
emm_t_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_t")), interaction = "pairwise")
emm_t_groups <- data.frame(emm_t_groups)
assign(paste0("m_", outcome_names[count], "_t_groups_tag4"), emm_t_groups)
# Figure 5
## Running emmeans on LMM for Age * Block * Target
emm_bt <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num*Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt"), emm_bt)
## Running contrasts on emmeans to get group differences
emm_bt_groups <- contrast(get(paste0("emm_m_",outcome_names[count], "_bt")), method = "pairwise")
emm_bt_groups <- data.frame(emm_bt_groups)
assign(paste0("emm_m_",outcome_names[count], "_bt_groups_tag5"), emm_bt_groups)
## Running emmeans on LMM for Age * Block | Target
emm_bt_bytarget <- emmeans(get(paste0("m_",outcome_names[count])), ~Age*Block_num|Target_Name)
assign(paste0("emm_m_",outcome_names[count], "_bt_bytarget"), emm_bt_bytarget)
## Running contrasts on emmeans to get slope differences sorted by target
emm_bt_bytarget_slopes <- contrast(get(paste0("emm_m_",
outcome_names[count],
"_bt_bytarget")),
interaction = "pairwise")
emm_bt_bytarget_slopes <- data.frame(emm_bt_bytarget_slopes)
assign(paste0("emm_m_",outcome_names[count], "_bt_slopes_tag6"), emm_bt_bytarget_slopes)
count <- count + 1
}
tags <- c("tag1","tag2", "tag3", "tag4", "tag5", "tag6")
for (t in tags) {
dataframes <- ls()
# Filter dataframes that end with "tag1"
dataframes_to_save <- dataframes[grep(t, dataframes)]
# Create an empty list to store dataframes
combined_dataframes <- list()
# Loop through the selected dataframes, combine them, and add a "Source" column
for (df_name in dataframes_to_save) {
# Get the dataframe by name
df <- get(df_name)
# Add a "Source" column with the dataframe name
df$Source <- df_name
# Append the modified dataframe to the list
combined_dataframes[[df_name]] <- df
}
# Combine all dataframes into one giant dataframe
final_combined_dataframes <- do.call(rbind, combined_dataframes)
# Define the CSV file name
csv_file <- paste0(output_directory, paste0("stats_data_",
t, ".csv"))
# Save the combined dataframe as a CSV file
write.csv(final_combined_dataframes, file = csv_file, row.names = TRUE)
# Print a message to confirm the save
cat("Saved combined data as", csv_file, "\n")
}
